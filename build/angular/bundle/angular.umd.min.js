!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@bosket/core"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["@bosket/core","@angular/core","@angular/common"],t):"object"==typeof exports?exports["bosket-angular"]=t(require("@bosket/core"),require("@angular/core"),require("@angular/common")):e["bosket-angular"]=t(e["bosket-core"],e.ng.core,e.ng.common)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=36)}({0:function(t,n){t.exports=e},15:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(5),r=(n.n(o),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}),i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e,t){this.viewContainerRef=e,this._componentFactoryResolver=t,this.componentRef=null}return e.prototype.ngOnChanges=function(e){if(this.component&&this.item){if(e.component){this.viewContainerRef.clear();try{var t=this._componentFactoryResolver.resolveComponentFactory(this.component);this.componentRef=this.viewContainerRef.createComponent(t)}catch(e){try{var t=this._componentFactoryResolver.resolveComponentFactory(this.component(this.item,this.inputs));this.componentRef=this.viewContainerRef.createComponent(t)}catch(e){throw e}}}this.componentRef&&e.item&&(this.componentRef.instance.item=this.item),this.componentRef&&e.inputs&&(this.componentRef.instance.inputs=this.inputs)}},r([Object(o.Input)("itemInjector"),i("design:type",Object)],e.prototype,"item",void 0),r([Object(o.Input)("inject"),i("design:type",Object)],e.prototype,"component",void 0),r([Object(o.Input)("inputs"),i("design:type",Object)],e.prototype,"inputs",void 0),e=r([Object(o.Directive)({selector:"[itemInjector]"}),i("design:paramtypes",[o.ViewContainerRef,o.ComponentFactoryResolver])],e)}()},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(37);n.d(t,"BosketModule",function(){return o.a})},37:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(5),r=(n.n(o),n(38)),i=(n.n(r),n(39)),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},p=function(){function e(){}return e=s([Object(o.NgModule)({imports:[r.CommonModule],declarations:[i.b,i.c,i.a],providers:[],exports:[i.b]})],e)}()},38:function(e,t){e.exports=n},39:function(e,t,n){"use strict";var o=n(40);n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return o.b}),n.d(t,"c",function(){return o.c})},40:function(e,t,n){"use strict";var o=n(15);n.d(t,"a",function(){return o.a});var r=n(41);n.d(t,"b",function(){return r.a});var i=n(42);n.d(t,"c",function(){return i.a})},41:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(5),r=(n.n(o),n(0)),i=(n.n(r),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}),s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e){var t=this;this.cdRef=e,this.display=r.defaults.display,this.key=function(e,t){return""+e},this.strategies=r.defaults.strategies,this.labels=r.defaults.labels,this.css=r.defaults.css,this.openerOpts=r.defaults.openerOpts,this.async=r.defaults.async,this._dragndrop=r.defaults.dragndrop,this.selectionChange=new o.EventEmitter,this.onDrag=new o.EventEmitter,this.onOver=new o.EventEmitter,this.onEnter=new o.EventEmitter,this.onLeave=new o.EventEmitter,this.onDrop=new o.EventEmitter,this.onCancel=new o.EventEmitter,this._props={get:function(){var e=["model","category","selection","display","search","async","key","strategies","labels","css","dragndrop","sort","disabled","openerOpts"],n={};return e.forEach(function(e){n[e]=t[e]}),n},set:function(e){for(var n in e)n in t&&(t[n]=e[n])}},this._outputs={onSelect:function(e,n,o,r){return t.selectionChange.emit(e)},onDrag:function(e,n,o){return t.onDrag.emit({target:e,event:n,inputs:o})},onEnter:function(e,n,o){return t.onEnter.emit({target:e,event:n,inputs:o})},onOver:function(e,n,o){return t.onOver.emit({target:e,event:n,inputs:o})},onLeave:function(e,n,o){return t.onLeave.emit({target:e,event:n,inputs:o})},onDrop:function(e,n,o){return t.onDrop.emit({target:e,event:n,inputs:o})},onCancel:function(e,n,o){return t.onCancel.emit({target:e,event:n,inputs:o})}},this._state={search:"",filtered:null,get:function(){return{search:t._state.search,filtered:t._state.filtered}},set:function(e){for(var n in e)n in t._state&&(t._state[n]=e[n])}},this.rootNode=new r.RootNode(this._props,this._outputs,this._state,this.cdRef.detectChanges)}return Object.defineProperty(e.prototype,"dragndrop",{get:function(){return this._dragndrop},set:function(e){this._dragndrop=e,this._dragndrop=this.rootNode.wrapDragNDrop()},enumerable:!0,configurable:!0}),e.prototype.getChildModel=function(){return this.sort?this.model.sort(this.sort):this.model},e.prototype.onSearch=function(e){this._state.set({search:e,filtered:this.rootNode.filterTree(e)})},i([Object(o.Input)(),s("design:type",Array)],e.prototype,"model",void 0),i([Object(o.Input)(),s("design:type",String)],e.prototype,"category",void 0),i([Object(o.Input)(),s("design:type",Array)],e.prototype,"selection",void 0),i([Object(o.Input)(),s("design:type",Function)],e.prototype,"display",void 0),i([Object(o.Input)(),s("design:type",Object)],e.prototype,"displayComponent",void 0),i([Object(o.Input)(),s("design:type",Function)],e.prototype,"key",void 0),i([Object(o.Input)(),s("design:type",Function)],e.prototype,"search",void 0),i([Object(o.Input)(),s("design:type",Object)],e.prototype,"strategies",void 0),i([Object(o.Input)(),s("design:type",Object)],e.prototype,"labels",void 0),i([Object(o.Input)(),s("design:type",Object)],e.prototype,"css",void 0),i([Object(o.Input)(),s("design:type",Function)],e.prototype,"sort",void 0),i([Object(o.Input)(),s("design:type",Function)],e.prototype,"disabled",void 0),i([Object(o.Input)(),s("design:type",Object)],e.prototype,"openerOpts",void 0),i([Object(o.Input)(),s("design:type",Function)],e.prototype,"async",void 0),i([Object(o.Input)(),s("design:type",Object),s("design:paramtypes",[Object])],e.prototype,"dragndrop",null),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"selectionChange",void 0),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"onDrag",void 0),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"onOver",void 0),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"onEnter",void 0),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"onLeave",void 0),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"onDrop",void 0),i([Object(o.Output)(),s("design:type",Object)],e.prototype,"onCancel",void 0),e=i([Object(o.Component)({selector:"TreeView",template:'\n        <div [class]="rootNode.mixCss(\'TreeView\')">\n                <input #searchBox\n                    *ngIf="search"\n                    type="search"\n                    [class]="rootNode.mixCss(\'search\')"\n                    [placeholder]="labels[\'search.placeholder\']"\n                    (input)="onSearch(searchBox.value)" />\n                <TreeViewNode\n                    [model]="getChildModel()"\n                    [filteredModel]="_state.filtered"\n                    [category]="category"\n                    [selection]="selection"\n                    [onSelect]="rootNode.onSelect"\n                    [strategies]="strategies"\n                    [display]="display"\n                    [displayComponent]="displayComponent"\n                    [key]="key"\n                    [css]="css"\n                    [dragndrop]="dragndrop"\n                    [async]="async"\n                    [ancestors]="[]"\n                    [sort]="sort"\n                    [disabled]="disabled"\n                    [searched]="_state.search.trim()"\n                    [openerOpts]="openerOpts"\n                    [labels]="labels">\n                </TreeViewNode>\n            </div>\n    ',changeDetection:o.ChangeDetectionStrategy.OnPush,host:{"(document:keyup)":"rootNode.onKey($event)","(document:keydown)":"rootNode.onKey($event)"}}),s("design:paramtypes",[o.ChangeDetectorRef])],e)}()},42:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(5),r=(n.n(o),n(15)),i=n(0),s=(n.n(i),this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}),p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=(n(8).object,function(){function e(e,t){var n=this;this._cdRef=e,this._componentFactoryResolver=t,this.keys=["model","category","selection","display","key","strategies","dragndrop","labels","sort","disabled","openerOpts","async","css","folded","loading","depth","ancestors","searched","onSelect"],this.openerOpts={position:"none"},this.depth=0,this.ancestorsMap=new Map,this._props={memoized:null,update:function(){var e={};n.keys.forEach(function(t){e[t]=n[t]}),n._props.memoized=e},get:function(){return n._props.memoized||n._props.update()&&n._props.memoized},set:function(e){for(var t in e)t in n&&(n[t]=e[t])}},this._state={unfolded:[],get:function(){return{unfolded:n._state.unfolded}},set:function(e){for(var t in e)t in n._state&&(n._state[t]=e[t])}},this.node=new i.TreeNode(this._props,null,this._state,function(){return n._cdRef.detectChanges()})}return e.prototype.ngOnChanges=function(){this._props.update()},e.prototype.ngAfterViewInit=function(){var e=this;this.model instanceof Array&&this.model.forEach(function(t){return e.ancestorsMap.set(t,e.ancestors.concat([t]))})},e.prototype.getModel=function(){var e=this;return this.searched?this.model.filter(function(t){return e.filteredModel.has(t)}):this.model},e.prototype.getChildModel=function(e){var t=e[this.category];return this.node.isAsync(e)&&!this.node.isFolded(e)&&this.node.pending.indexOf(e)<0&&this.node.unwrapPromise(e),this.node.isAsync(e)||(t=this.sort?t.sort(this.sort):t),t},e.prototype.getChildFiltered=function(e){return this.searched?this.filteredModel.get(e):null},e.prototype.getAncestors=function(e){return this.ancestorsMap.has(e)||this.ancestorsMap.set(e,this.ancestors.concat([e])),this.ancestorsMap.get(e)},e.prototype.invokeEvent=function(e,t,n,o){void 0===o&&(o=!0);var r=this.node.getDragEvents(t,o)[e];r&&r(n)},e.prototype.renderOpener=function(e,t){return(this.node.hasChildren(e)||this.node.isAsync(e))&&this.openerOpts.position===t},s([Object(o.Input)(),p("design:type",Array)],e.prototype,"model",void 0),s([Object(o.Input)(),p("design:type",String)],e.prototype,"category",void 0),s([Object(o.Input)(),p("design:type",Array)],e.prototype,"selection",void 0),s([Object(o.Input)(),p("design:type",Function)],e.prototype,"display",void 0),s([Object(o.Input)(),p("design:type",Function)],e.prototype,"key",void 0),s([Object(o.Input)(),p("design:type",Object)],e.prototype,"strategies",void 0),s([Object(o.Input)(),p("design:type",Object)],e.prototype,"labels",void 0),s([Object(o.Input)(),p("design:type",Function)],e.prototype,"sort",void 0),s([Object(o.Input)(),p("design:type",Function)],e.prototype,"disabled",void 0),s([Object(o.Input)(),p("design:type",Object)],e.prototype,"openerOpts",void 0),s([Object(o.Input)(),p("design:type",Function)],e.prototype,"async",void 0),s([Object(o.Input)(),p("design:type",Object)],e.prototype,"displayComponent",void 0),s([Object(o.Input)(),p("design:type",Object)],e.prototype,"dragndrop",void 0),s([Object(o.Input)(),p("design:type",Map)],e.prototype,"filteredModel",void 0),s([Object(o.Input)(),p("design:type",Object)],e.prototype,"css",void 0),s([Object(o.Input)(),p("design:type",Boolean)],e.prototype,"folded",void 0),s([Object(o.Input)(),p("design:type",Boolean)],e.prototype,"loading",void 0),s([Object(o.Input)(),p("design:type",Number)],e.prototype,"depth",void 0),s([Object(o.Input)(),p("design:type",Array)],e.prototype,"ancestors",void 0),s([Object(o.Input)(),p("design:type",String)],e.prototype,"searched",void 0),s([Object(o.Input)(),p("design:type",Function)],e.prototype,"onSelect",void 0),s([Object(o.ViewChildren)(r.a),p("design:type",Array)],e.prototype,"itemInjectors",void 0),e=s([Object(o.Component)({selector:"TreeViewNode",template:'\n        <ul *ngIf="!folded && !loading"\n            [ngClass]="node.ulCss()"\n            (dragover)="invokeEvent(\'onDragOver\', null, $event, !depth)"\n            (dragenter)="invokeEvent(\'onDragEnter\', null, $event, !depth)"\n            (dragleave)="invokeEvent(\'onDragLeave\', null, $event, !depth)"\n            (drop)="invokeEvent(\'onDrop\', null, $event, !depth)">\n\n            <li *ngFor="let item of getModel(); let i = index; trackBy: key"\n                [class]="node.liCss(item)"\n                [draggable]="node.getDragEvents(item).draggable"\n                (dragstart)="invokeEvent(\'onDragStart\', item, $event)"\n                (dragover)="invokeEvent(\'onDragOver\', item, $event)"\n                (dragenter)="invokeEvent(\'onDragEnter\', item, $event)"\n                (dragleave)="invokeEvent(\'onDragLeave\', item, $event)"\n                (dragend)="invokeEvent(\'onDragEnd\', item, $event)"\n                (drop)="invokeEvent(\'onDrop\', item, $event)">\n                <span [class]="node.mixCss(\'item\')" (click)="node.onClick(item)($event)">\n                    <span *ngIf="renderOpener(item, \'left\')"\n                        [class]="node.mixCss(\'opener\')"\n                        (click)="node.onOpener(item)($event)"></span>\n                    <ng-container *ngIf="!displayComponent">{{ display(item, _props.get()) }}</ng-container>\n                    <ng-template *ngIf="displayComponent" [itemInjector]="item" [inject]="displayComponent" [inputs]="_props.get()"></ng-template>\n                    <span *ngIf="renderOpener(item, \'right\')"\n                        [class]="node.mixCss(\'opener\')"\n                        (click)="node.onOpener(item)($event)"></span>\n                </span>\n                <TreeViewNode\n                    *ngIf="node.hasChildren(item) || node.isAsync(item)"\n                    [model]="getChildModel(item)"\n                    [filteredModel]="getChildFiltered(item)"\n                    [ancestors]="getAncestors(item)"\n                    [depth]="depth + 1"\n                    [folded]="node.isFolded(item)"\n                    [loading]="node.isAsync(item) && !node.isFolded(item)"\n                    [category]="category"\n                    [selection]="selection"\n                    [onSelect]="onSelect"\n                    [strategies]="strategies"\n                    [labels]="labels"\n                    [display]="display"\n                    [displayComponent]="displayComponent"\n                    [css]="css"\n                    [async]="async"\n                    [dragndrop]="dragndrop"\n                    [sort]="sort"\n                    [disabled]="disabled"\n                    [searched]="searched"\n                    [openerOpts]="openerOpts">\n                </TreeViewNode>\n            </li>\n        </ul>\n        <span *ngIf="loading"></span>\n    ',changeDetection:o.ChangeDetectionStrategy.OnPush}),p("design:paramtypes",[o.ChangeDetectorRef,o.ComponentFactoryResolver])],e)}())},5:function(e,n){e.exports=t},8:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"object",function(){return i});var r=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var s,p=e[Symbol.iterator]();!(o=(s=p.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&p.return&&p.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){if(!(e&&e instanceof Object))throw new Error("Bad object format");return{shallowCompare:function(t,n){var o=!0;for(var r in e)if(e.hasOwnProperty(r)&&!(n&&n.indexOf(r)>=0)&&t[r]!==e[r])return void(o=!1);return o},filter:function(t){var n={};for(var o in e)e.hasOwnProperty(o)&&t(e[o])&&(n[o]=e[o]);return n},map:function(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o]));return n},fullMap:function(t){var n={};for(var o in e)if(e.hasOwnProperty(o)){var i=t(o,e[o]),s=r(i,2),p=s[0],c=s[1];n[p]=c}return n},nestPrefix:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=o({},t,{});for(var i in e)e.hasOwnProperty(i)&&i.startsWith(t)?r[t][n(i.substring(t.length))]=e[i]:r[i]=e[i];return r}}}}})});
//# sourceMappingURL=angular.umd.min.js.map