!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@bosket/core"),require("riot")):"function"==typeof define&&define.amd?define(["@bosket/core","riot"],e):"object"==typeof exports?exports["bosket-riot"]=e(require("@bosket/core"),require("riot")):t["bosket-riot"]=e(t["bosket-core"],t.riot)}("undefined"!=typeof self?self:this,function(t,e){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=50)}({0:function(e,n){e.exports=t},10:function(t,n){t.exports=e},50:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),n(54)},51:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.optsMixin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"opts";return{init:function(){this.on("update",this.updateOpts),this._originalOpts=Object.keys(this.opts),this.updateOpts()},updateOpts:function(){if(this.opts)for(var e in this.opts[t])~this._originalOpts.indexOf(e)||(this.opts[e]=this.opts[t][e])}}}},52:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.transitionMixin=function(t){return{init:function(){var e=this;if(this.opts.transition){var n=this.opts.transition.name,o=this.unmount,i=function(){var o=(t||function(){return e.root})();o&&(o.classList.add(n),o.classList.add(n+"-mount"),setTimeout(function(){o.classList.remove(n+"-mount")},10))},r=!1,s=function(){if(!r){r=!0;var i=(t||function(){return e.root})();if(!i)return o.call(e);i.addEventListener("transitionend",function(){o.call(e)}),i.classList.add(n+"-unmount")}};this.one("mount",i),Object.defineProperty(this,"unmount",{value:s})}}}}},53:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.listenerMixin=function(t){var e=t.eventType,n=void 0===e?"click":e,o=t.callback,i=t.regulate,r=void 0!==i&&i;return{init:function(){var t=!1,e=function(e){o&&(r?(t||window.requestAnimationFrame(function(){return o(e,function(){return t=!1})}),t=!0):o(e))};this.one("mount",function(){document.addEventListener(n,e)}),this.one("unmount",function(){document.removeEventListener(n,e)})}}}},54:function(t,e,n){"use strict";n(55),n(56),n(57)},55:function(t,e,n){n(10).tag2("treeview",'<div class="{rootNode.mixCss(⁗TreeView⁗)}"> <input type="search" class="{rootNode.mixCss(⁗search⁗)}" if="{inputs.get().search}" placeholder="{inputs.get().labels[⁗search.placeholder⁗]}" oninput="{onSearch}"> <treeviewnode opts="{inputs.get()}" selection="{opts.selection}" model="{inputs.get().sort ? inputs.get().model.sort(inputs.get().sort) : inputs.get().model}" filteredmodel="{filtered}" onselection="{rootNode.onSelect}" dragndrop="{rootNode.wrapDragNDrop()}" ancestors="{[]}" searched="{search.trim()}" depth="{0}"> </TreeViewNode> </div>',"","",function(t){"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},o=this,i=n(0),r=n(6);this.mixin((0,r.optsMixin)()),this.mixin((0,r.listenerMixin)({eventType:"keyup",callback:function(t){return o.rootNode.onKey(t)}})),this.mixin((0,r.listenerMixin)({eventType:"keydown",callback:function(t){return o.rootNode.onKey(t)}})),this.filtered=null,this.search="",this.onSearch=function(t){var e=t.currentTarget.value;o.search=e,o.filtered=o.rootNode.filterTree(e)},this.inputs={get:function(){return e({},i.defaults,o.opts,{onSelect:o.opts.onselection})}},this.outputs={onSelect:this.inputs.get().onselection,onDrag:this.inputs.get().dragndrop&&this.inputs.get().dragndrop.drag,onOver:this.inputs.get().dragndrop&&this.inputs.get().dragndrop.over,onEnter:this.inputs.get().dragndrop&&this.inputs.get().dragndrop.enter,onLeave:this.inputs.get().dragndrop&&this.inputs.get().dragndrop.leave,onDrop:this.inputs.get().dragndrop&&this.inputs.get().dragndrop.drop,onCancel:this.inputs.get().dragndrop&&this.inputs.get().dragndrop.cancel},this.state={get:function(){return e({},o)},set:function(t){for(var e in t)e in o&&(o[e]=t[e])}},this.rootNode=new i.RootNode(this.inputs,this.outputs,this.state,this.update)})},56:function(t,e,n){n(10).tag2("treeviewnode",'<ul if="{!opts.folded && !opts.loading}" data-is="with-transition" transition="{opts.transition}" class="{node.ulCss()}" ondragover="{!opts.depth ? rootEvents.onDragOver : null}" ondragenter="{!opts.depth ? rootEvents.onDragEnter : null}" ondragleave="{!opts.depth ? rootEvents.onDragLeave : null}" ondrop="{!opts.depth ? rootEvents.onDrop : null}"> <li each="{item in getModel()}" class="{node.liCss(item)}" draggable="{node.getDragEvents(item).draggable}" ondragstart="{node.getDragEvents(item).onDragStart}" ondragover="{node.getDragEvents(item).onDragOver}" ondragenter="{node.getDragEvents(item).onDragEnter}" ondragleave="{node.getDragEvents(item).onDragLeave}" ondragend="{node.getDragEvents(item).onDragEnd}" ondrop="{node.getDragEvents(item).onDrop}"> <span class="{parent.node.mixCss(⁗item⁗)}" onclick="{parent.node.onClick(item)}"> <span if="{renderOpener(item, ⁗left⁗)}" class="{node.mixCss(⁗opener⁗)}" onclick="{node.onOpener(item)}"></span> <virtual if="{!parent.opts.displaytag}"> {parent.opts.display(item, parent.opts)} </virtual> <virtual if="{parent.opts.displaytag}" data-is="{parent.opts.displaytag(item, parent.opts)}" item="{item}" inputs="{inputs.get()}"></virtual> <span if="{renderOpener(item, ⁗right⁗)}" class="{node.mixCss(⁗opener⁗)}" onclick="{node.onOpener(item)}"></span> </span> <treeviewnode if="{node.hasChildren(item) || node.isAsync(item)}" opts="{parent.opts}" selection="{parent.opts.selection}" model="{getChildModel(item)}" filteredmodel="{getChildFiltered(item)}" ancestors="{getAncestors(item)}" depth="{parent.opts.depth + 1}" folded="{node.isFolded(item)}" loading="{node.isAsync(item) && !node.isFolded(item)}"> </TreeViewNode> </li> </ul> <span if="{opts.loading}"></span>',"","",function(t){"use strict";var e=this,o=n(0),i=n(6);this.mixin((0,i.optsMixin)()),this.unfolded=[],this.getModel=function(){return e.opts.searched?e.opts.model.filter(function(t){return e.opts.filteredmodel.has(t)}):e.opts.model},this.getChildModel=function(t){var n=t[e.opts.category];return e.node.isAsync(t)&&!e.node.isFolded(t)&&e.node.pending.indexOf(t)<0&&e.node.unwrapPromise(t),e.node.isAsync(t)||(n=e.opts.sort?n.sort(e.opts.sort):n),n},this.getChildFiltered=function(t){return e.opts.searched?e.opts.filteredmodel.get(t):null},this.getAncestors=function(t){return[].concat(e.opts.ancestors,[t])},this.renderOpener=function(t,n){return(e.node.hasChildren(t)||e.node.isAsync(t))&&e.opts.openerOpts.position===n};var r=function(){e.opts.onSelect=e.opts.onselection,e.opts.disabled=e.opts.disable};this.on("update",r),r(),this.inputs={get:function(){return e.opts}},this.state={get:function(){return e},set:function(t){for(var n in t)n in e&&(e[n]=t[n])}},this.node=new o.TreeNode(this.inputs,null,this.state,this.update),this.rootEvents=this.node.getDragEvents()})},57:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),i=function(t){return t&&t.__esModule?t:{default:t}}(o),r=n(6);e.default=i.default.tag("with-transition",!1,function(t){var e=this;this.mixin((0,r.transitionMixin)());var n=function(){for(var t in e.parent)e.parent.hasOwnProperty(t)&&(e[t]=e.parent[t])};n(),this.on("update",n)})},6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(51);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(52);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(53);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})})}})});
//# sourceMappingURL=riot.umd.min.js.map